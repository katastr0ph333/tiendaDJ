{% extends 'base.html' %}
{% load static %}

{% block contenido %}

<div class="container py-5">

    <div class="row">

        <!-- IMAGEN PRINCIPAL -->
        <div class="col-md-6 text-center">
            {% if producto.imagenes.first %}
                <img src="{{ producto.imagenes.first.imagen.url }}"
                    class="img-fluid rounded shadow-sm"
                    style="max-height:350px; object-fit:contain;">
            {% else %}
                <img src="{% static 'img/no-image.png' %}"
                    class="img-fluid rounded shadow-sm"
                    style="max-height:350px;">
            {% endif %}
        </div>

        <!-- INFORMACIÓN -->
        <div class="col-md-6">

            <h2 class="mb-3">{{ producto.nombre }}</h2>

            <p class="text-muted">
                Categoría: <strong>{{ producto.categoria.nombre }}</strong>
            </p>

            <h4 class="text-success">Precio: ${{ producto.precio_base }}</h4>

            <p class="mt-3">{{ producto.descripcion }}</p>

            <!-- BOTÓN SOLICITAR -->
            <a href="{% url 'solicitud_producto' producto.id %}"
            class="btn btn-primary btn-lg mt-4">
                Solicitar este producto
            </a>

        </div>

    </div>

    <!-- GALERÍA EXTRA -->
    {% if producto.imagenes.all|length > 1 %}
    <hr class="my-5">
    <h4>Imágenes adicionales</h4>

    <div class="row mt-3">
        {% for img in producto.imagenes.all %}
        <div class="col-md-3 col-6 mb-3">
            <img src="{{ img.imagen.url }}"
                class="img-fluid rounded shadow-sm"
                style="height:150px; object-fit:cover;">
        </div>
        {% endfor %}
    </div>
    {% endif %}

</div>

{% endblock %}
