{% extends 'base.html' %}
{% load static %}

{% block titulo %}{{ producto.nombre }}{% endblock %}

{% block contenido %}

<div class="container mt-4">

    <!-- Título -->
    <h2 class="mb-4">{{ producto.nombre }}</h2>

    <div class="row g-4">

        <!-- IMAGEN PRINCIPAL -->
        <div class="col-md-6">
            
            {% if producto.imagenes.first %}
                <img 
                    src="{{ producto.imagenes.first.imagen.url }}" 
                    class="img-fluid rounded shadow-sm"
                    alt="{{ producto.nombre }}"
                >
            {% else %}
                <img 
                    src="{% static 'img/no-image.png' %}" 
                    class="img-fluid rounded"
                    alt="Sin imagen"
                >
            {% endif %}

            <!-- Miniaturas -->
            {% if producto.imagenes.all|length > 1 %}
                <div class="mt-3 d-flex flex-wrap gap-2">
                    {% for img in producto.imagenes.all %}
                        <img
                            src="{{ img.imagen.url }}"
                            class="rounded"
                            style="height:70px; object-fit:cover; cursor:pointer;"
                            onclick="document.getElementById('mainImg').src='{{ img.imagen.url }}'"
                        >
                    {% endfor %}
                </div>
            {% endif %}
        </div>

        <!-- INFORMACION DEL PRODUCTO -->
        <div class="col-md-6">

            <p class="lead">{{ producto.descripcion }}</p>

            <p class="fw-bold fs-5">
                Precio base: ${{ producto.precio_base }}
            </p>

            <p class="text-muted">
                Categoría: {{ producto.categoria.nombre }}
            </p>

            <div class="mt-4">
                <a href="{% url 'solicitud_producto' producto.id %}" 
                class="btn btn-dark btn-lg w-100">
                    Solicitar este producto
                </a>
            </div>

        </div>

    </div>
</div>

{% endblock %}
